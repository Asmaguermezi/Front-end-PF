{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{getAllUtilisateurs,supprimerUtilisateur,updateUtilisateur,inscriptionUtilisateur}from\"../../services/ApiUser\";// ✅ import propre avec les bons noms\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export default function CardTable(_ref){let{color}=_ref;const[users,setUsers]=useState([]);const getUsers=async()=>{try{const res=await getAllUtilisateurs();// ✅ nom backend respecté\nsetUsers(res.data);}catch(error){console.log(error);}};useEffect(()=>{getUsers();},[]);const deleteUser=async id=>{try{await supprimerUtilisateur(id);// ✅ nom backend respecté\ngetUsers();}catch(error){console.log(error);}};const[newUser,setNewUser]=useState({firstName:\"\",lastName:\"\",age:\"\",email:\"\",password:\"\"});const handleChange=e=>{const{name,value}=e.target;setNewUser({...newUser,[name]:value});};const AddNewUser=async()=>{try{await inscriptionUtilisateur(newUser);// ✅ nom backend respecté\ngetUsers();}catch(error){console.log(error);}};const updateNewUser=async(user,id)=>{try{await updateUtilisateur(id,user);// ✅ nom backend respecté\ngetUsers();}catch(error){console.log(error);}};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"relative flex flex-col min-w-0 break-words w-full mb-6 shadow-lg rounded \"+(color===\"light\"?\"bg-white\":\"bg-lightBlue-900 text-white\"),children:[/*#__PURE__*/_jsx(\"div\",{className:\"rounded-t mb-0 px-4 py-3 border-0\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-wrap items-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"relative w-full px-4 max-w-full flex-grow flex-1\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold text-lg\",children:\"Liste des utilisateurs\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"firstName\",placeholder:\"First Name\",value:newUser.firstName,onChange:handleChange,className:\"p-2 rounded text-black mr-2\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"lastName\",placeholder:\"Last Name\",value:newUser.lastName,onChange:handleChange,className:\"p-2 rounded text-black mr-2\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"age\",placeholder:\"Age\",value:newUser.age,onChange:handleChange,className:\"p-2 rounded text-black mr-2\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"email\",placeholder:\"Email\",value:newUser.email,onChange:handleChange,className:\"p-2 rounded text-black mr-2\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\",placeholder:\"Mot de passe\",onChange:handleChange,className:\"p-2 rounded text-black mr-2\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>AddNewUser(),className:\"bg-yellow-400 text-black mt-2 px-4 py-2 rounded\",children:\"Ajouter\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>updateNewUser(newUser,newUser._id),className:\"bg-yellow-400 text-black mt-2 ml-2 px-4 py-2 rounded\",children:\"Mettre \\xE0 jour\"})]})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"block w-full overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"items-center w-full bg-transparent border-collapse\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"text-left text-xs uppercase\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3\",children:\"First Name\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3\",children:\"Last Name\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3\",children:\"Email\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3\",children:\"Date\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3\",children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:users.map(user=>{var _user$createdAt;return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-2\",children:user.firstName}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-2\",children:user.lastName}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-2\",children:user.email}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-2\",children:(_user$createdAt=user.createdAt)===null||_user$createdAt===void 0?void 0:_user$createdAt.slice(0,10)}),/*#__PURE__*/_jsxs(\"td\",{className:\"px-6 py-2 text-right\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setNewUser(user),className:\"text-yellow-300 underline mr-2\",children:\"Modifier\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>deleteUser(user._id),className:\"text-red-400 underline\",children:\"Supprimer\"})]})]},user._id);})})]})})]})});}CardTable.defaultProps={color:\"light\"};","map":{"version":3,"names":["React","useEffect","useState","getAllUtilisateurs","supprimerUtilisateur","updateUtilisateur","inscriptionUtilisateur","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","CardTable","_ref","color","users","setUsers","getUsers","res","data","error","console","log","deleteUser","id","newUser","setNewUser","firstName","lastName","age","email","password","handleChange","e","name","value","target","AddNewUser","updateNewUser","user","children","className","type","placeholder","onChange","onClick","_id","map","_user$createdAt","createdAt","slice","defaultProps"],"sources":["C:/Users/user/Downloads/Template_React_Notus-main (1)/Template_React_Notus-main/src/components/Cards/CardTable.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport PropTypes from \"prop-types\";\nimport {\n  getAllUtilisateurs,\n  supprimerUtilisateur,\n  updateUtilisateur,\n  inscriptionUtilisateur,\n} from \"../../services/ApiUser\"; // ✅ import propre avec les bons noms\n\nexport default function CardTable({ color }) {\n  const [users, setUsers] = useState([]);\n\n  const getUsers = async () => {\n    try {\n      const res = await getAllUtilisateurs(); // ✅ nom backend respecté\n      setUsers(res.data);\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  useEffect(() => {\n    getUsers();\n  }, []);\n\n  const deleteUser = async (id) => {\n    try {\n      await supprimerUtilisateur(id); // ✅ nom backend respecté\n      getUsers();\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  const [newUser, setNewUser] = useState({\n    firstName: \"\",\n    lastName: \"\",\n    age: \"\",\n    email: \"\",\n    password: \"\",\n  });\n\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    setNewUser({ ...newUser, [name]: value });\n  };\n\n  const AddNewUser = async () => {\n    try {\n      await inscriptionUtilisateur(newUser); // ✅ nom backend respecté\n      getUsers();\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  const updateNewUser = async (user, id) => {\n    try {\n      await updateUtilisateur(id, user); // ✅ nom backend respecté\n      getUsers();\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  return (\n    <>\n      <div\n        className={\n          \"relative flex flex-col min-w-0 break-words w-full mb-6 shadow-lg rounded \" +\n          (color === \"light\" ? \"bg-white\" : \"bg-lightBlue-900 text-white\")\n        }\n      >\n        <div className=\"rounded-t mb-0 px-4 py-3 border-0\">\n          <div className=\"flex flex-wrap items-center\">\n            <div className=\"relative w-full px-4 max-w-full flex-grow flex-1\">\n              <h3 className=\"font-semibold text-lg\">Liste des utilisateurs</h3>\n              <div>\n                <input\n                  type=\"text\"\n                  name=\"firstName\"\n                  placeholder=\"First Name\"\n                  value={newUser.firstName}\n                  onChange={handleChange}\n                  className=\"p-2 rounded text-black mr-2\"\n                />\n                <input\n                  type=\"text\"\n                  name=\"lastName\"\n                  placeholder=\"Last Name\"\n                  value={newUser.lastName}\n                  onChange={handleChange}\n                  className=\"p-2 rounded text-black mr-2\"\n                />\n                <input\n                  type=\"number\"\n                  name=\"age\"\n                  placeholder=\"Age\"\n                  value={newUser.age}\n                  onChange={handleChange}\n                  className=\"p-2 rounded text-black mr-2\"\n                />\n                <input\n                  type=\"email\"\n                  name=\"email\"\n                  placeholder=\"Email\"\n                  value={newUser.email}\n                  onChange={handleChange}\n                  className=\"p-2 rounded text-black mr-2\"\n                />\n                <input\n                  type=\"password\"\n                  name=\"password\"\n                  placeholder=\"Mot de passe\"\n                  onChange={handleChange}\n                  className=\"p-2 rounded text-black mr-2\"\n                />\n                <br />\n                <button\n                  onClick={() => AddNewUser()}\n                  className=\"bg-yellow-400 text-black mt-2 px-4 py-2 rounded\"\n                >\n                  Ajouter\n                </button>\n                <button\n                  onClick={() => updateNewUser(newUser, newUser._id)}\n                  className=\"bg-yellow-400 text-black mt-2 ml-2 px-4 py-2 rounded\"\n                >\n                  Mettre à jour\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"block w-full overflow-x-auto\">\n          <table className=\"items-center w-full bg-transparent border-collapse\">\n            <thead>\n              <tr className=\"text-left text-xs uppercase\">\n                <th className=\"px-6 py-3\">First Name</th>\n                <th className=\"px-6 py-3\">Last Name</th>\n                <th className=\"px-6 py-3\">Email</th>\n                <th className=\"px-6 py-3\">Date</th>\n                <th className=\"px-6 py-3\">Actions</th>\n              </tr>\n            </thead>\n            <tbody>\n              {users.map((user) => (\n                <tr key={user._id}>\n                  <td className=\"px-6 py-2\">{user.firstName}</td>\n                  <td className=\"px-6 py-2\">{user.lastName}</td>\n                  <td className=\"px-6 py-2\">{user.email}</td>\n                  <td className=\"px-6 py-2\">\n                    {user.createdAt?.slice(0, 10)}\n                  </td>\n                  <td className=\"px-6 py-2 text-right\">\n                    <button\n                      onClick={() => setNewUser(user)}\n                      className=\"text-yellow-300 underline mr-2\"\n                    >\n                      Modifier\n                    </button>\n                    <button\n                      onClick={() => deleteUser(user._id)}\n                      className=\"text-red-400 underline\"\n                    >\n                      Supprimer\n                    </button>\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </>\n  );\n}\n\nCardTable.defaultProps = {\n  color: \"light\",\n};\n\nCardTable.propTypes = {\n  color: PropTypes.oneOf([\"light\", \"dark\"]),\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}